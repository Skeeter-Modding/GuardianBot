<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardian Bot OAuth2 Setup Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            line-height: 1.6;
        }
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .step {
            background: rgba(0, 255, 136, 0.1);
            border-left: 4px solid #00ff88;
            padding: 15px;
            margin: 15px 0;
        }
        .code {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
        }
        .url {
            background: rgba(0, 212, 255, 0.2);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #00d4ff;
            word-break: break-all;
        }
        h1, h2 { color: #00ff88; }
        .warning {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>üîê Guardian Bot OAuth2 Setup Guide</h1>
    
    <div class="card">
        <h2>üìã Quick Setup Checklist</h2>
        <p>Complete OAuth2 setup in 5 minutes:</p>
        <ol>
            <li>‚úÖ Get Discord OAuth2 credentials</li>
            <li>‚úÖ Configure redirect URIs</li>
            <li>‚úÖ Update config.json</li>
            <li>‚úÖ Run setup_oauth2.bat</li>
            <li>‚úÖ Test dashboard login</li>
        </ol>
    </div>

    <div class="card">
        <h2>üöÄ Step 1: Discord Developer Portal</h2>
        
        <div class="step">
            <h3>1.1 Go to Discord Developer Portal</h3>
            <div class="url">https://discord.com/developers/applications</div>
        </div>

        <div class="step">
            <h3>1.2 Get OAuth2 Credentials</h3>
            <p><strong>General Information:</strong></p>
            <ul>
                <li>Application ID (Client ID)</li>
                <li>Public Key</li>
            </ul>
            
            <p><strong>OAuth2 Section:</strong></p>
            <ul>
                <li>Client Secret (click "Reset Secret")</li>
            </ul>
            
            <p><strong>Bot Section:</strong></p>
            <ul>
                <li>Bot Token (click "Reset Token")</li>
            </ul>
        </div>

        <div class="step">
            <h3>1.3 Configure Redirect URIs</h3>
            <p>In OAuth2 ‚Üí General ‚Üí Redirects, add:</p>
            <div class="code">
http://localhost:3000/auth/callback
https://your-domain.com/auth/callback
            </div>
        </div>

        <div class="step">
            <h3>1.4 Set OAuth2 Scopes</h3>
            <p>For dashboard access, select these scopes:</p>
            <ul>
                <li>‚úÖ <strong>identify</strong> - Get user info</li>
                <li>‚úÖ <strong>guilds</strong> - List user's servers</li>
                <li>‚úÖ <strong>bot</strong> - Add bot to servers</li>
                <li>‚úÖ <strong>applications.commands</strong> - Slash commands</li>
            </ul>
        </div>

        <div class="step">
            <h3>1.5 Installation Settings (NEW 2025)</h3>
            <p>In Installation page, enable:</p>
            <ul>
                <li>‚úÖ <strong>User Install</strong> - Bot works in DMs</li>
                <li>‚úÖ <strong>Guild Install</strong> - Bot works in servers</li>
            </ul>
        </div>
    </div>

    <div class="card">
        <h2>‚öôÔ∏è Step 2: Configure Guardian Bot</h2>
        
        <div class="step">
            <h3>2.1 Update config.json</h3>
            <div class="code">
{
    "token": "YOUR_BOT_TOKEN_HERE",
    "clientId": "YOUR_APPLICATION_ID_HERE",
    "clientSecret": "YOUR_CLIENT_SECRET_HERE",
    "redirectUri": "http://localhost:3000/auth/callback",
    "sessionSecret": "your-random-session-secret"
}
            </div>
        </div>

        <div class="step">
            <h3>2.2 Install Dependencies</h3>
            <div class="code">
npm install express-session axios
            </div>
        </div>
    </div>

    <div class="card">
        <h2>üöÄ Step 3: Launch with OAuth2</h2>
        
        <div class="step">
            <h3>3.1 Run OAuth2 Setup</h3>
            <div class="code">
setup_oauth2.bat
            </div>
            <p>This will:</p>
            <ul>
                <li>‚úÖ Install OAuth2 dependencies</li>
                <li>‚úÖ Register slash commands</li>
                <li>‚úÖ Generate OAuth2 URLs</li>
                <li>‚úÖ Start bot + dashboard</li>
            </ul>
        </div>

        <div class="step">
            <h3>3.2 Access Dashboard</h3>
            <p><strong>Dashboard URLs:</strong></p>
            <div class="url">http://localhost:3000 - Home page</div>
            <div class="url">http://localhost:3000/auth/login - Discord login</div>
            <div class="url">http://localhost:3000/dashboard - Protected dashboard</div>
            <div class="url">http://localhost:3000/invite - Bot invite links</div>
        </div>
    </div>

    <div class="card">
        <h2>üîó Generated OAuth2 URLs</h2>
        
        <div class="step">
            <h3>Guild Install (Servers)</h3>
            <div class="url">
https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&permissions=8&scope=bot%20applications.commands
            </div>
        </div>

        <div class="step">
            <h3>User Install (Personal DMs)</h3>
            <div class="url">
https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&scope=applications.commands
            </div>
        </div>

        <div class="step">
            <h3>Dashboard Login</h3>
            <div class="url">
https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=http://localhost:3000/auth/callback&response_type=code&scope=identify%20guilds
            </div>
        </div>
    </div>

    <div class="warning">
        <h2>üîí Security Best Practices</h2>
        <ul>
            <li>üîê Never share your Client Secret or Bot Token</li>
            <li>üîê Use HTTPS for production redirect URIs</li>
            <li>üîê Store tokens securely (environment variables)</li>
            <li>üîê Implement proper session management</li>
            <li>üîê Validate all OAuth2 responses</li>
        </ul>
    </div>

    <div class="card">
        <h2>üéØ OAuth2 Features Included</h2>
        <ul>
            <li>‚úÖ Discord login authentication</li>
            <li>‚úÖ User server list with admin filtering</li>
            <li>‚úÖ Secure session handling</li>
            <li>‚úÖ Token refresh support</li>
            <li>‚úÖ Modern 2025 Discord API compliance</li>
            <li>‚úÖ User & Guild installable bot</li>
            <li>‚úÖ Protected dashboard routes</li>
            <li>‚úÖ OAuth2 error handling</li>
        </ul>
    </div>

    <div class="card">
        <h2>üîß Troubleshooting</h2>
        <p><strong>Common Issues:</strong></p>
        <ul>
            <li><strong>Invalid Client:</strong> Check clientId in config.json</li>
            <li><strong>Invalid Redirect URI:</strong> Add exact URI to Discord portal</li>
            <li><strong>Access Denied:</strong> Check OAuth2 scopes</li>
            <li><strong>Token Expired:</strong> Implement refresh token logic</li>
        </ul>
    </div>
</body>
</html>