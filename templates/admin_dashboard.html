<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardian Bot Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .update-btn {
            background: #00ff88;
            color: #333;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .nav-link {
            color: #00ff88;
            text-decoration: none;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üõ°Ô∏è Guardian Bot Admin Dashboard</h1>
        <p>Welcome, {{ admin }}!</p>
        <nav>
            <a href="/" class="nav-link">Public Dashboard</a>
            <a href="/api/stats" class="nav-link">API Stats</a>
            <a href="/invite" class="nav-link">Bot Invite</a>
        </nav>
    </div>
    
    <div class="admin-grid">
        <div class="admin-card">
            <h3>üìä Update Statistics</h3>
            <form id="statsForm">
                <input type="number" id="totalTickets" placeholder="Total Tickets" class="stat-input" value="{{ bot_data.total_tickets }}">
                <input type="number" id="activeTickets" placeholder="Active Tickets" class="stat-input" value="{{ bot_data.active_tickets }}">
                <button type="submit" class="update-btn">Update Stats</button>
            </form>
        </div>
        
        <div class="admin-card">
            <h3>üé´ Current Statistics</h3>
            <p><strong>Total Tickets:</strong> {{ "{:,}".format(bot_data.total_tickets) }}</p>
            <p><strong>Active Tickets:</strong> {{ bot_data.active_tickets }}</p>
            <p><strong>Resolved Tickets:</strong> {{ "{:,}".format(bot_data.resolved_tickets) }}</p>
            <p><strong>Users Helped:</strong> {{ "{:,}".format(bot_data.users_helped) }}</p>
        </div>
        
        <div class="admin-card">
            <h3>ü§ñ Bot Status</h3>
            <p><strong>Status:</strong> {{ bot_data.status.title() }}</p>
            <p><strong>Uptime:</strong> {{ bot_data.uptime }}</p>
            <p><strong>Trump Responses:</strong> {{ "{:,}".format(bot_data.trump_responses) }}</p>
            <p><strong>Skeeter Protections:</strong> {{ bot_data.skeeter_protections }}</p>
        </div>
        
        <div class="admin-card">
            <h3>üîó Quick Links</h3>
            <p><a href="/api/stats" style="color: #00ff88;">API Endpoint</a></p>
            <p><a href="/invite" style="color: #00ff88;">Bot Invite Link</a></p>
            <p><a href="/support" style="color: #00ff88;">Support Server</a></p>
            <p><a href="/" style="color: #00ff88;">Public Dashboard</a></p>
        </div>
    </div>
    
    <script>
        document.getElementById('statsForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const totalTickets = document.getElementById('totalTickets').value;
            const activeTickets = document.getElementById('activeTickets').value;
            
            try {
                const response = await fetch(`/api/admin/update-stats?total_tickets=${totalTickets}&active_tickets=${activeTickets}`, {
                    method: 'GET',
                    credentials: 'include'
                });
                
                if (response.ok) {
                    alert('‚úÖ Statistics updated successfully!');
                    location.reload();
                } else {
                    alert('‚ùå Failed to update statistics');
                }
            } catch (error) {
                alert('‚ùå Error updating statistics: ' + error.message);
            }
        });
    </script>
</body>
</html>